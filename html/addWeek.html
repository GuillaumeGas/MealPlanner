<script language="JavaScript">
    function addMealToDay(mealName, mealId, dayNum) {
        var div = document.getElementById("day" + dayNum);
        div.innerHTML = "";

        var innerLabel = document.createElement("label");
        innerLabel.innerText = mealName;

        var innerCheckbox = document.createElement("input");
        innerCheckbox.type = "checkbox";
        innerCheckbox.value = mealId;
        innerCheckbox.name = "mealsId[]";
        innerCheckbox.checked = true;
        innerCheckbox.style = "visibility: hidden";

        div.appendChild(innerLabel);
        div.appendChild(innerCheckbox);
    }
</script>


<!-- Begin Page Content -->
<div class="container-fluid">
    <!-- Content Row -->
    <div class="card shadow mb-4">
        <div class="card-header py-3">
            <h6 class="m-0 font-weight-bold text-primary">Nouvelle semaine</h6>
        </div>
        <div class="card-body">
            <div class="row">
                <div class="col-6">
                    <form method="POST" action="index.php?page=weeks&action=add">
                        <div class="row">
                            <label class="col-md-3 col-form-label">Ingrédients : </label>
                            <div class="col-md-6">
                                <div class="table-responsive">
                                    <table class="table table-striped table-hover table-sm">
                                        {foreach from=$Days item=day}
                                        <tr>
                                            <th>{$day.DayName} :</th>
                                            <td>
                                                <div id="day{$day.DayNum}"></div>
                                            </td>
                                        </tr>
                                        {/foreach}
                                    </table>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-12">
                                <button type="submit" class="btn btn-primary btn-block btn-sm">Ok</button>
                            </div>
                        </div>
                    </form>
                </div>
                <div class="col">
                    <ul class="nav nav-tabs" id="dayTab" role="tablist">
                        {foreach from=$Days item=day}
                        <li class="nav-item">
                            <a id="home-tab" data-toggle="tab" href="#{$day.DayName}" role="tab"
                               aria-controls="{$day.DayName}" aria-selected="{if $day.DayNum == 1}true{else}false{/if}"
                               class="nav-link {if $day.DayNum == 1}active{/if}" href="#">
                                {$day.DayName}
                            </a>
                        </li>
                        {/foreach}
                    </ul>
                    <div class="tab-content" id="dayTabContent">
                        {foreach from=$Days item=day}
                        <div class="tab-pane fade {if $day.DayNum == 1}show active{/if}" id="{$day.DayName}"
                             role="tabpanel" aria-labelledby="{$day.DayName}-tab">
                            <div class="row">
                                <label class="col-md-2 col-form-label">Viande</label>
                                <div clas="col-md-10">
                                    <input type="checkbox" id="checkboxMeat" class="form-control"/>
                                </div>
                            </div>
                            <div class="row">
                                <label class="col-md-2 col-form-label">Poisson</label>
                                <div clas="col-md-10">
                                    <input type="checkbox" id="checkboxFish" class="form-control"/>
                                </div>
                            </div>
                            <div class="row">
                                <label class="col-md-2 col-form-label">Rapide</label>
                                <div clas="col-md-10">
                                    <input type="checkbox" id="checkboxQuick" class="form-control"/>
                                </div>
                            </div>
                            <div class="row">
                                <table width="100%">
                                    {foreach from=$day.Meals item=meal}
                                    <tr>
                                        <td>{$meal.Name}</td>
                                        <td>{$meal.TypeStr}</td>
                                        <td>{$meal.QuickToMakeStr}</td>
                                        <td>
                                            <button onclick="addMealToDay('{$meal.Name}', {$meal.Id}, {$day.DayNum}); return false;">
                                                Sélectionner
                                            </button>
                                        </td>
                                    </tr>
                                    {/foreach}
                                </table>
                            </div>
                        </div>
                        {/foreach}
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- /.container-fluid -->